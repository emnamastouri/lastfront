<!doctype html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,100,300,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <form class="d-flex mt-3" role="search" style="margin-top: 0; margin-bottom: 0; margin-left: 70px;">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" [(ngModel)]="cinwanted"
            name="cinwanted">
        <button class="btn btn-outline-success" type="submit" (click)="rechercher()"
            style="background-color:rgb(29, 55, 255); ; color: white;">Rechercher</button>
    </form>
    <section class="ftco-section" style="top:0">
        <div class="container" style="min-height: 500px;max-height: 500px;overflow-y: auto; overflow-x: hidden;">
            <div class="row justify-content-center">
                <div class="col-md-6 text-center mb-5">
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="table-wrap">
                        <table class="table">
                            <thead style="position: sticky; top:10px">
                                <tr>
                                    <th style="background-color: rgb(77, 97, 245); color: white;">CIN</th>
                                    <th style="background-color: rgb(77, 97, 245);color: white;">Nom</th>
                                    <th style="background-color: rgb(77, 97, 245);color: white;">Prénom</th>
                                    <th style="background-color: rgb(77, 97, 245);color: white;">Date de naissance</th>
                                    <th style="background-color: rgb(77, 97, 245);color: white;">Email</th>
                                    <th style="background-color: rgb(77, 97, 245);color: white;">Photo</th>
                                    <th style="background-color: rgb(77, 97, 245);color: white;">Supprimer</th>
                                    <th style="background-color: rgb(77, 97, 245);color: white;">Modifier</th>
                                </tr>
                            </thead>

                            <tbody *ngFor="let item of agents">
                                <tr *ngIf="!item.isEditing">
                                    <th scope="row" class="scope">{{item.cin}}</th>
                                    <td>{{item.firstname}}</td>
                                    <td>{{item.lastname}}</td>
                                    <td>{{item.birthday}}</td>
                                    <td>{{item.email}}</td>
                                    <td><button style=" background-color: white; color: rgb(77, 97, 245);"
                                            (click)="getimage(item.cin)"><i class="fas fa-image"></i></button></td>
                                    <td><button style=" background-color: white; color: red; "
                                            (click)="deleteagent(item.cin)"><i class="fas fa-trash"></i></button></td>
                                    <td><button style=" background-color: white; color: rgb(55, 179, 55); "
                                            (click)="edit(item)"><i class="fas fa-edit"></i></button></td>
                                </tr>
                                <tr *ngIf="item.isEditing">
                                    <th scope="row" class="scope">{{item.cin}}</th>
                                    <td><input [(ngModel)]="item.newfirstname" [placeholder]="item.firstname"
                                            type="text" style="border: none; color: #585858;"></td>
                                    <td><input [(ngModel)]="item.newlastname" type="text"
                                            style="border: none; color: #585858;"></td>
                                    <td><input [(ngModel)]="item.newbirthday" type="date"
                                            style="border: none;color: #585858;"></td>
                                    <td><input [(ngModel)]="item.newemail" type="email"
                                            style="border: none;color: #585858;"></td>
                                    <td></td>
                                    <td></td>
                                    <td><button style=" background-color: white; color: rgb(55, 179, 55); "
                                            (click)="saveedit(item)"><i class="fas fa-save"></i></button></td>
                                </tr>
                                

                            </tbody>
                            <tr class="adduser" *ngIf="adduser" style="width: 600px;">
                                    <th scope="row" class="scope"><input style="border: none;" type="number"
                                            placeholder="CIN" [(ngModel)]="agent.cin"></th>
                                    <td><input style="border: none;" type="text" placeholder="Nom"
                                            [(ngModel)]="agent.firstname"></td>
                                    <td><input style="border: none;" type="text" placeholder="Prénom"
                                            [(ngModel)]="agent.lastname "></td>
                                    <td><input style="border: none;" type="date" placeholder="Date de naissance"
                                            [(ngModel)]="agent.birthday"></td>
                                    <td><input style="border: none;" type="text" placeholder="Email"
                                            [(ngModel)]="agent.email"></td>
                                    <td><input style="border: none;" type="password" placeholder="password"
                                            [(ngModel)]="agent.password"></td>

                                    <td><button style=" background-color: white; color: rgb(55, 179, 55); "><i
                                                class="fas fa-save" (click)="save()"></i></button></td>
                                </tr>
                            <tr>
                                <th></th>
                                <td></td>
                                <td></td>
                                <td><button class="plus" (click)="addagent()"
                                        style="transition: transform 0.2s ease;font-size: 1.9rem; background-color: white; color: rgb(77, 97, 245);"><i
                                            class="fas fa-plus"></i></button></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>


                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
    <script defer
        src="https://static.cloudflareinsights.com/beacon.min.js/vedd3670a3b1c4e178fdfb0cc912d969e1713874337387"
        integrity="sha512-EzCudv2gYygrCcVhu65FkAxclf3mYM6BCwiGUm6BEuLzSb5ulVhgokzCZED7yMIkzYVg65mxfIBNdNra5ZFNyQ=="
        data-cf-beacon='{"rayId":"887b68019d030c4d","version":"2024.4.1","token":"cd0b4b3a733644fc843ef0b185f98241"}'
        crossorigin="anonymous"></script>
</body>

<div #searchDialogRef *ngIf="showagent" style="position: fixed; top: 30px; display: block;">
    <div
        style="flex: 1 0;   max-width: 350px;max-height: 400px; min-width: 350px;min-height: 400px; overflow-y: scrolls;margin-left: 550px; margin-top: 70px;">
        <form action="/submit_registration" method="post" id="addagebt" *ngIf="showagent">
            <div class="image-flip">
                <div class="mainflip flip-0">
                    <div class="frontside">
                        <div class="card">
                            <div class="card-body text-center">
                                <h3 class="card-title">{{wanted.firstname}}&nbsp;&nbsp;{{wanted.lastname}}</h3>
                                <p><img class=" img-fluid" [src]="wanted.image" alt="Photo de profil"
                                        style="height: 280px;"></p>
                                <p><strong>Téléphone:</strong>&nbsp;{{wanted.phone}}</p>
                                <p><strong>Email:</strong>&nbsp;{{wanted.email}}</p>
                                <p><strong>Date de naissance:</strong>&nbsp;{{wanted.birthday}}</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </form>
        <button type="button" (click)="fermer()"
            style="position: absolute;margin-top: 50px; top: 0; right: 0; background-color: rgb(255, 0, 0); border: none; padding: 10px; cursor: pointer;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x"
                viewBox="0 0 16 16">
                <path
                    d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
            </svg>
        </button>
    </div>
</div>
<div #searchDialogRef *ngIf="showimage" style="position: fixed; top: 30px; display: block;">
    <div
        style="flex: 1 0;   max-width: 350px;max-height: 400px; min-width: 350px;min-height: 400px; overflow-y: scrolls;margin-left: 550px; margin-top: 70px;">
        <form action="/submit_registration" method="post" id="addagebt" *ngIf="showimage">
            <div class="image-flip">
                <div class="mainflip flip-0">
                    <div class="frontside">
                        <div class="card">
                            <div class="card-body text-center">
                                <h3 class="card-title">{{wanted.firstname}}&nbsp;&nbsp;{{wanted.lastname}}</h3>
                                <p><img class=" img-fluid" [src]="wanted.image" alt="Photo de profil"
                                        style="height: 280px;"></p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </form>
        <button type="button" (click)="fermerimage()"
            style="position: absolute;margin-top: 50px; top: 0; right: 0; background-color: rgb(255, 0, 0); border: none; padding: 10px; cursor: pointer;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x"
                viewBox="0 0 16 16">
                <path
                    d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
            </svg>
        </button>
    </div>
</div>



</html>